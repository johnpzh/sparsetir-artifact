# Environments
ulimit -s unlimited
export FLUSH_L2=ON

# GPU
export CUDA_DEVICE_ORDER="PCI_BUS_ID"
export CUDA_VISIBLE_DEVICES="0"

# Applications
app_hyb="bench_suitesparse_spmm_hyb.correctness.py"
app_naive="bench_suitesparse_spmm_naive.correctness.py"
output_dir="output.correctness"

# MATRICES=( \
# "dc2" \
# "HTC_336_4438"\
# )
MATRICES=( \
"d_dyn" \
"d_dyn1" \
"d_ss" \
"dc1" \
"dc2" \
"dc3" \
"descriptor_xingo6u" \
"DK01R" \
"dw256A" \
"dw256B" \
"dwa512" \
"dwb512" \
"email-Eu-core" \
"email-Eu-core-temporal" \
"email-EuAll" \
)
# MATRICES=( \
# "dc2" \
# "dc3" \
# "trans5" \
# "trans4" \
# "dc1" \
# "ins2" \
# "ASIC_100k" \
# "ASIC_680k" \
# "blockqp1" \
# "boyd1" \
# "mult_dcop_03" \
# "brainpc2" \
# "mult_dcop_02" \
# "mult_dcop_01" \
# "bloweybq" \
# "ASIC_320k" \
# "hangGlider_4" \
# "hangGlider_5" \
# "hangGlider_3" \
# "transient" \
# "shermanACb" \
# "rajat28" \
# "rajat25" \
# "rajat17" \
# "rajat18" \
# "rajat24" \
# "rajat16" \
# "TSOPF_FS_b9_c6" \
# "circuit_3" \
# "rajat20" \
# "case9" \
# "TSOPF_RS_b39_c30" \
# "rajat21" \
# "bloweya" \
# "rajat13" \
# "boyd2" \
# "shermanACd" \
# "bloweybl" \
# "TSOPF_RS_b39_c19" \
# "lowThrust_9" \
# "lowThrust_7" \
# "lowThrust_12" \
# "iprob" \
# "Sieber" \
# "TSOPF_RS_b9_c6" \
# "lowThrust_4" \
# "reorientation_8" \
# "circuit_1" \
# "lowThrust_11" \
# "TSOPF_RS_b39_c7" \
# "TSOPF_FS_b39_c30" \
# "reorientation_6" \
# "c-57" \
# "reorientation_5" \
# "lowThrust_6" \
# "Raj1" \
# "shermanACa" \
# "lowThrust_13" \
# "lowThrust_8" \
# "spaceShuttleEntry_4" \
# "lowThrust_10" \
# "c-73b" \
# "a5esindl" \
# "reorientation_4" \
# "lowThrust_5" \
# "Oregon-1" \
# "c-73" \
# "TSOPF_FS_b39_c19" \
# "reorientation_3" \
# "reorientation_7" \
# "case39" \
# "kineticBatchReactor_5" \
# "kineticBatchReactor_9" \
# "nxp1" \
# "TSOPF_FS_b39_c7" \
# "TSOPF_RS_b162_c3" \
# "circuit_4" \
# "lowThrust_3" \
# "spaceShuttleEntry_3" \
# "Oregon-2" \
# "kineticBatchReactor_6" \
# "coupled" \
# "kineticBatchReactor_7" \
# "TSOPF_RS_b162_c4" \
# "c-30" \
# "kineticBatchReactor_4" \
# "rajat12" \
# "kineticBatchReactor_8" \
# "adder_trans_01" \
# "email-EuAll" \
# "adder_dcop_62" \
# "adder_dcop_61" \
# "adder_dcop_33" \
# "adder_dcop_68" \
# "adder_dcop_12" \
# "c-32" \
# "adder_dcop_32" \
# "adder_dcop_30" \
# "TSOPF_FS_b9_c1" \
# "adder_dcop_24" \
# "circuit_2" \
# "adder_dcop_05" \
# "adder_dcop_03" \
# "adder_dcop_04" \
# "adder_dcop_23" \
# "adder_dcop_22" \
# "adder_dcop_11" \
# "init_adder1" \
# "as-735" \
# "hangGlider_2" \
# "adder_trans_02" \
# "adder_dcop_01" \
# "c-64b" \
# "adder_dcop_28" \
# "c-64" \
# "adder_dcop_46" \
# "adder_dcop_42" \
# "adder_dcop_17" \
# "adder_dcop_27" \
# "spaceShuttleEntry_2" \
# "adder_dcop_49" \
# "adder_dcop_53" \
# "adder_dcop_34" \
# "adder_dcop_60" \
# "adder_dcop_18" \
# "adder_dcop_41" \
# "adder_dcop_25" \
# "adder_dcop_26" \
# "adder_dcop_16" \
# "adder_dcop_56" \
# "adder_dcop_65" \
# "as-caida" \
# "adder_dcop_45" \
# "reorientation_2" \
# "adder_dcop_64" \
# "adder_dcop_59" \
# "adder_dcop_29" \
# "adder_dcop_43" \
# "adder_dcop_35" \
# "adder_dcop_67" \
# "adder_dcop_20" \
# "adder_dcop_58" \
# "adder_dcop_57" \
# "adder_dcop_47" \
# "adder_dcop_63" \
# "adder_dcop_39" \
# "web-BerkStan" \
# "adder_dcop_36" \
# "adder_dcop_51" \
# "adder_dcop_21" \
# "adder_dcop_15" \
# "adder_dcop_02" \
# "adder_dcop_50" \
# "adder_dcop_07" \
# "adder_dcop_14" \
# "adder_dcop_40" \
# "adder_dcop_69" \
# "adder_dcop_54" \
# "adder_dcop_66" \
# "adder_dcop_52" \
# "adder_dcop_31" \
# "c-43" \
# "adder_dcop_55" \
# "adder_dcop_10" \
# "web-Stanford" \
# "adder_dcop_19" \
# "adder_dcop_08" \
# "adder_dcop_48" \
# "adder_dcop_44" \
# "adder_dcop_06" \
# "adder_dcop_09" \
# "adder_dcop_13" \
# "adder_dcop_38" \
# "adder_dcop_37" \
# "TSOPF_RS_b162_c1" \
# "rajat22" \
# "kineticBatchReactor_3" \
# "dynamicSoaringProblem_7" \
# "dynamicSoaringProblem_8" \
# "TSOPF_FS_b162_c4" \
# "c-40" \
# "c-45" \
# "TSOPF_FS_b162_c3" \
# "dynamicSoaringProblem_6" \
# "freeFlyingRobot_16" \
# "kineticBatchReactor_2" \
# "TSOPF_FS_b162_c1" \
# "analytics" \
# "dynamicSoaringProblem_5" \
# "freeFlyingRobot_15" \
# "lowThrust_2" \
# "dynamicSoaringProblem_4" \
# "orani678" \
# "rajat04" \
# "c-53" \
# "rajat26" \
# "TSOPF_RS_b300_c2" \
# "fs_541_3" \
# "TSOPF_RS_b300_c3" \
# "a0nsdsil" \
# "meg4" \
# "c-66" \
# "c-66b" \
# "c-58" \
# "freeFlyingRobot_11" \
# "wiki-topcats" \
# "dynamicSoaringProblem_3" \
# "a2nnsnsl" \
# "freeFlyingRobot_13" \
# "reorientation_1" \
# "freeFlyingRobot_12" \
# "freeFlyingRobot_9" \
# "freeFlyingRobot_14" \
# "freeFlyingRobot_8" \
# "fs_541_2" \
# "c-47" \
# "ckt11752_dc_1" \
# "fs_541_1" \
# "freeFlyingRobot_10" \
# "c-42" \
# "fs_541_4" \
# "TSOPF_RS_b300_c1" \
# "TSC_OPF_300" \
# "c-62ghs" \
# "soc-Epinions1" \
# "c-62" \
# "loc-Gowalla" \
# "tumorAntiAngiogenesis_8" \
# "ckt11752_tr_0" \
# "rajat27" \
# "c-33" \
# "c-61" \
# "freeFlyingRobot_6" \
# "spaceShuttleEntry_1" \
# "c-71" \
# "c-50" \
# "c-big" \
# "tumorAntiAngiogenesis_7" \
# "c-55" \
# "c-35" \
# "c-34" \
# "c-46" \
# "soc-sign-bitcoin-otc" \
# "c-65" \
# "freeFlyingRobot_7" \
# "rajat15" \
# "tumorAntiAngiogenesis_6" \
# "freeFlyingRobot_5" \
# "c-69" \
# "c-63" \
# "dynamicSoaringProblem_2" \
# "c-51" \
# "webbase-1M" \
# "c-23" \
# "psmigr_2" \
# "psmigr_3" \
# "cit-HepTh" \
# "c-49" \
# "c-36" \
# "gupta1" \
# "tumorAntiAngiogenesis_4" \
# "c-59" \
# "tumorAntiAngiogenesis_3" \
# "tumorAntiAngiogenesis_5" \
# "web-NotreDame" \
# "eu-2005" \
# "HEP-th" \
# "soc-sign-bitcoin-alpha" \
# "kineticBatchReactor_1" \
# "soc-sign-Slashdot090216" \
# "c-38" \
# "kron_g500-logn18" \
# "soc-sign-epinions" \
# "c-52" \
# "sts4098" \
# "rajat23" \
# "soc-sign-Slashdot081106" \
# "freeFlyingRobot_4" \
# "soc-sign-Slashdot090221" \
# "c-41" \
# "c-60" \
# "c-25" \
# "c-70" \
# "higgs-twitter" \
# "HTC_336_4438" \
# "c-72" \
# "TSOPF_FS_b300_c2" \
# "rajat19" \
# "c-37" \
# "c-21" \
# "TSOPF_FS_b300_c1" \
# "bcsstk08" \
# "c-44" \
# "email-Enron" \
# "tumorAntiAngiogenesis_2" \
# "com-Youtube" \
# "TSOPF_RS_b678_c1" \
# "c-19" \
# "hangGlider_1" \
# "c-29" \
# "c-67b" \
# "TSOPF_FS_b300_c3" \
# "TSOPF_FS_b300" \
# "HTC_336_9129" \
# "G36" \
# "c-68" \
# "meg1" \
# "kron_g500-logn19" \
# "c-31" \
# "c-48" \
# "goddardRocketProblem_2" \
# "TSOPF_RS_b678_c2" \
# "c-67" \
# "wikipedia-20060925" \
# "c-54" \
# "c-27" \
# "net4-1" \
# "sx-mathoverflow" \
# "tomography" \
# "freeFlyingRobot_2" \
# "c-39" \
# "c-56" \
# "c-28" \
# "barrier2-12" \
# "wiki-RfA" \
# "soc-Slashdot0811" \
# "barrier2-11" \
# "goddardRocketProblem_1" \
# "barrier2-9" \
# "freeFlyingRobot_3" \
# "c-26" \
# "wikipedia-20061104" \
# "tumorAntiAngiogenesis_1" \
# "kron_g500-logn20" \
# "soc-Slashdot0902" \
# "barrier2-10" \
# "G42" \
# "wikipedia-20051105" \
# "wikipedia-20070206" \
# "kron_g500-logn21" \
# "barrier2-2" \
# "TSOPF_RS_b2052_c1" \
# "sx-superuser" \
# "wiki-Vote" \
# "dynamicSoaringProblem_1" \
# "bundle1" \
# "Zd_Jac6" \
# "lowThrust_1" \
# "barrier2-1" \
# "barrier2-3" \
# "barrier2-4" \
# "spaceStation_14" \
# "p2p-Gnutella24" \
# "indochina-2004" \
# "loc-Brightkite" \
# "memplus" \
# "cnae9_10NN" \
# "Zd_Jac2" \
# "ex27" \
# "sx-askubuntu" \
# "c-18" \
# "FA" \
# "rajat14" \
# "micromass_10NN" \
# "Zd_Jac3" \
# "mahindas" \
# "c-22" \
# "email-Eu-core" \
# "mbeacxc" \
# "arc130" \
# "USAir97" \
# "spaceStation_12" \
# "email-Eu-core-temporal" \
# "para-8" \
# "spaceStation_11" \
# "c-24" \
# "spaceStation_9" \
# "mbeaflw" \
# "ca-HepPh" \
# "power197k" \
# "fs_183_4" \
# "dendrimer" \
# "bcsstk38" \
# "fs_183_6" \
# "freeFlyingRobot_1" \
# "cit-HepPh" \
# "para-7" \
# "para-10" \
# "para-6" \
# "para-5" \
# "para-9" \
# "c-20" \
# "spaceStation_13" \
# "TSOPF_RS_b2383_c1" \
# "spaceStation_8" \
# "bcsstk02" \
# "TSOPF_RS_b2383" \
# "Chem97ZtZ" \
# "mbeause" \
# "power9" \
# "fs_183_3" \
# "msc01050" \
# "spaceStation_7" \
# "fs_183_1" \
# "hcircuit" \
# "spaceStation_10" \
# "ex2" \
# "3D_51448_3D" \
# "add20" \
# "spaceStation_6" \
# "para-4" \
# "jan99jac020" \
# "spaceStation_5" \
# "TSC_OPF_1047" \
# "std1_Jac3" \
# "CollegeMsg" \
# "comsol" \
# "spaceStation_4" \
# "jan99jac040" \
# "as-Skitter" \
# "fp" \
# "jan99jac020sc" \
# "std1_Jac2" \
# "graham1" \
# "bips07_1998" \
# "ibm_matrix_2" \
# "web-Google" \
# "heart1" \
# "mcfe" \
# "p2p-Gnutella08" \
# "jan99jac040sc" \
# "spiral" \
# "wiki-Talk" \
# "heart3" \
# "heart2" \
# "msc00726" \
# "astro-ph" \
# "ww_36_pmec_36" \
# "cbuckle" \
# "bayer06" \
# "bips07_2476" \
# "cavity02" \
# "SiNa" \
# "Olivetti_norm_10NN" \
# "p2p-Gnutella09" \
# "ca-CondMat" \
# "cavity03" \
# "ca-GrQc" \
# "bcsstk04" \
# "cavity04" \
# "west0497" \
# "fpga_trans_02" \
# "cavity01" \
# "jan99jac080" \
# "iris_dataset_30NN" \
# "SiH4" \
# "cavity08" \
# "ca-AstroPh" \
# "bips98_606" \
# "nasa2910" \
# "jan99jac060" \
# "bcsstm37" \
# "ex21" \
# "jan99jac060sc" \
# "spaceStation_3" \
# "Si2" \
# "fpga_dcop_08" \
# "watt_2" \
# "fpga_dcop_24" \
# "fpga_dcop_20" \
# "bips07_1693" \
# "fpga_trans_01" \
# "ex22" \
# "apache2" \
# "fpga_dcop_49" \
# "cavity06" \
# "ex25" \
# "p2p-Gnutella05" \
# "fpga_dcop_10" \
# "bips98_1450" \
# "fpga_dcop_09" \
# "west0381" \
# "bcsstm35" \
# "ex26" \
# "rajat05" \
# "west0655" \
# "Goodwin_010" \
# "fpga_dcop_05" \
# "bayer07" \
# "fpga_dcop_21" \
# "bayer05" \
# "ex1" \
# "bcsstm34" \
# "Ecoli_10NN" \
# "bcsstm07" \
# "wiki-talk-temporal" \
# "ss1" \
# "p2p-Gnutella25" \
# "jan99jac080sc" \
# "ca-HepTh" \
# "av41092" \
# "mcca" \
# "bayer08" \
# "bcsstk34" \
# "ex23" \
# "bundle_adj" \
# "hor_131" \
# "rotor1" \
# "mhda416" \
# "fpga_dcop_23" \
# "fpga_dcop_35" \
# "oscil_dcop_32" \
# "fpga_dcop_07" \
# "tols340" \
# "p2p-Gnutella30" \
# "citationCiteseer" \
# "fpga_dcop_47" \
# "fpga_dcop_18" \
# "MISKnowledgeMap" \
# "plat362" \
# "fpga_dcop_26" \
# "fpga_dcop_51" \
# "fpga_dcop_38" \
# "fpga_dcop_40" \
# "wb-edu" \
# "tols2000" \
# "bcsstm13" \
# "fpga_dcop_11" \
# "west0479" \
# "fpga_dcop_04" \
# "fpga_dcop_46" \
# "fpga_dcop_13" \
# "cavity09" \
# "g7jac020" \
# "str_400" \
# "hep-th" \
# "Na5" \
# "dw256A" \
# "nos5" \
# "p2p-Gnutella31" \
# "cavity07" \
# "bips98_1142" \
# "bcsstk05" \
# "poli4" \
# "k49_norm_10NN" \
# "fpga_dcop_50" \
# "bcsstm38" \
# "fpga_dcop_44" \
# "kmnist_norm_10NN" \
# "fpga_dcop_36" \
# "GD97_b" \
# "fpga_dcop_31" \
# "fpga_dcop_15" \
# "dermatology_5NN" \
# "tols90" \
# "bp_400" \
# "fpga_dcop_30" \
# "fpga_dcop_16" \
# "Spielman_k100" \
# "oscil_dcop_39" \
# "fs_760_1" \
# "bcsstk09" \
# "fpga_dcop_33" \
# "shallow_water2" \
# "fpga_dcop_32" \
# "fpga_dcop_37" \
# "jan99jac100sc" \
# "dwt_419" \
# "msc10848" \
# "fpga_dcop_03" \
# "mesh2e1" \
# "exdata_1" \
# "rdb200l" \
# "cage6" \
# "fpga_dcop_02" \
# "fpga_dcop_25" \
# "can_1072" \
# "Zd_Jac3_db" \
# "fpga_dcop_14" \
# "fpga_dcop_28" \
# "fpga_dcop_22" \
# "fpga_dcop_48" \
# "fpga_dcop_43" \
# "mice_10NN" \
# "fpga_dcop_42" \
# "sme3Db" \
# "ck104" \
# "asia_osm" \
# "fpga_dcop_29" \
# "Spectro_10NN" \
# "spaceStation_2" \
# "oscil_dcop_17" \
# "Glass_10NN" \
# "fpga_dcop_06" \
# "YaleA_10NN" \
# "bfwa62" \
# "breasttissue_10NN" \
# "std1_Jac3_db" \
# "cavity05" \
# "Goodwin_013" \
# "rotor2" \
# "yeast_30NN" \
# "bp_1600" \
# "rajat11" \
# "g7jac060" \
# "bcsstk27" \
# "plantsmargin_12NN" \
# "tols1090" \
# "collins_15NN" \
# "jan99jac120" \
# "fpga_dcop_39" \
# "ex9" \
# "fpga_dcop_12" \
# "jan99jac100" \
# "mark3jac020sc" \
# "fpga_dcop_34" \
# "poli_large" \
# "germany_osm" \
# "fpga_dcop_01" \
# "ex37" \
# "matrix-new_3" \
# "Stanford" \
# "g7jac050sc" \
# "lnsp_131" \
# "poisson3Db" \
# "ex6" \
# "str_0" \
# "bcsstk13" \
# "lshp_778" \
# "lund_a" \
# "Sandi_authors" \
# "ex7" \
# "jan99jac120sc" \
# "oscil_dcop_51" \
# "bfwb398" \
# "fpga_dcop_27" \
# "cavity15" \
# "cz148" \
# "human_gene1" \
# "fpga_dcop_41" \
# "bips07_3078" \
# "oscil_dcop_11" \
# "fpga_dcop_17" \
# "poli3" \
# "west0132" \
# "oscil_dcop_13" \
# "fpga_dcop_45" \
# "oscil_dcop_40" \
# "fpga_dcop_19" \
# "shallow_water1" \
# "robot" \
# "cavity13" \
# "3D_28984_Tetra" \
# "goodwin" \
# "oscil_dcop_50" \
# "bcsstm27" \
# "cage4" \
# "GaAsH6" \
# "Zd_Jac2_db" \
# "str_600" \
# "Zd_Jac6_db" \
# "oscil_dcop_43" \
# "p2p-Gnutella06" \
# "steam2" \
# "oscil_dcop_08" \
# "cage7" \
# "lund_b" \
# "bcsstk07" \
# "roadNet-TX" \
# "GD02_b" \
# "lns_131" \
# "std1_Jac2_db" \
# "mouse_gene" \
# "cond-mat" \
# "oscil_dcop_03" \
# "g7jac060sc" \
# "ex20" \
# "bcspwr06" \
# "g7jac040" \
# "oscil_dcop_26" \
# "m3plates" \
# "oscil_dcop_29" \
# "Vehicle_10NN" \
# "Fashion_MNIST_norm_10NN" \
# "patents_main" \
# "roadNet-CA" \
# "sx-stackoverflow" \
# "rail_1357" \
# "oscil_dcop_44" \
# "oscil_dcop_48" \
# "ex5" \
# "oscil_dcop_30" \
# "oscil_dcop_24" \
# "xingo3012" \
# "str_200" \
# "pores_1" \
# "494_bus" \
# "oscil_dcop_18" \
# "oscil_dcop_21" \
# "oscil_dcop_25" \
# "g7jac040sc" \
# "bcsstk01" \
# "bfwb62" \
# "bp_600" \
# "oscil_dcop_20" \
# "oscil_dcop_41" \
# "bp_0" \
# "tols4000" \
# "impcol_e" \
# "p2p-Gnutella04" \
# "oscil_dcop_28" \
# "can_445" \
# "oscil_dcop_34" \
# "oscil_dcop_42" \
# "oscil_dcop_05" \
# "hugetric-00020" \
# "barth5" \
# "bayer09" \
# "oscil_dcop_02" \
# "LF10" \
# "Baumann" \
# "oscil_dcop_55" \
# "orbitRaising_2" \
# "com-Orkut" \
# "rdb200" \
# "dictionary28" \
# "oscil_dcop_45" \
# "radfr1" \
# "Lin" \
# "netscience" \
# "human_gene2" \
# "ex31" \
# "oscil_dcop_35" \
# "west0989" \
# "usroads-48" \
# "ww_vref_6405" \
# "g7jac020sc" \
# "language" \
# "com-Amazon" \
# "oscil_dcop_46" \
# "oscil_dcop_52" \
# "oscil_dcop_27" \
# "bp_800" \
# "semeion_10NN" \
# "mesh3em5" \
# "bcsstm36" \
# "oscil_dcop_10" \
# "west0167" \
# "roadNet-PA" \
# "oscil_dcop_57" \
# "lock3491" \
# "bp_1000" \
# "nos3" \
# "oscil_dcop_07" \
# "hugetric-00010" \
# "dw256B" \
# "radiation" \
# "dwb512" \
# "ex3" \
# "shyy161" \
# "bcsstk06" \
# "M20PI_n1" \
# "ljournal-2008" \
# "t3dl_e" \
# "fs_760_3" \
# "ted_A_unscaled" \
# "matrix_9" \
# "ncvxqp9" \
# "plantstexture_10NN" \
# "mesh1e1" \
# "ted_A" \
# "oscil_dcop_16" \
# "mhdb416" \
# "bfwb782" \
# "M10PI_n" \
# "bp_1200" \
# "west2021" \
# "fs_760_2" \
# "oscil_dcop_56" \
# "cz628" \
# "1138_bus" \
# "cage5" \
# "M10PI_n1" \
# "steam1" \
# "oscil_dcop_38" \
# "ck400" \
# "bayer03" \
# "descriptor_xingo6u" \
# "oscil_dcop_53" \
# "helm2d03" \
# "bp_200" \
# "bcsstm03" \
# "rajat03" \
# "rdb968" \
# "nos4" \
# "mario002" \
# "gre_185" \
# "steam3" \
# "bcsstk19" \
# "dataset22mfeatzernike_10NN" \
# "mesh2em5" \
# "bp_1400" \
# "mario001" \
# "oscil_dcop_15" \
# "mesh1em1" \
# "plskz362" \
# "spaceStation_1" \
# "viscoplastic1" \
# "ex24" \
# "xingo_afonso_itaipu" \
# "mimo28x28_system" \
# "bcsstk22" \
# "zenios" \
# "mark3jac020" \
# "oscil_dcop_12" \
# "dwa512" \
# "wang4" \
# "ex28" \
# "Si10H16" \
# "poisson2D" \
# "extr1b" \
# "bcsstk20" \
# "powersim" \
# "utm300" \
# "impcol_d" \
# "cage8" \
# "impcol_b" \
# "bcsstm39" \
# "bcsstk28" \
# "west1505" \
# "problem1" \
# "eurqsa" \
# "oscil_dcop_19" \
# "685_bus" \
# "torso1" \
# "pre2" \
# "cavity12" \
# "Binaryalphadigs_10NN" \
# "dwt_878" \
# "ck656" \
# "lop163" \
# "oscil_dcop_49" \
# "bauru5727" \
# "spmsrtls" \
# "raefsky1" \
# "orbitRaising_1" \
# "pores_2" \
# "Transport" \
# "oscil_dcop_47" \
# "pde225" \
# "S10PI_n1" \
# "plbuckle" \
# "oscil_dcop_01" \
# "west0067" \
# "bcspwr10" \
# "bcsstm10" \
# "Tina_DisCal" \
# "nnc666" \
# "mesh1em6" \
# "apache1" \
# "orsirr_2" \
# "uni_chimera_i2" \
# "mhd4800a" \
# "oscil_dcop_09" \
# "sherman2" \
# "bcsstk14" \
# "orbitRaising_4" \
# "ohne2" \
# "ex10" \
# "bcsstm12" \
# "coater1" \
# "dataset12mfeatfactors_10NN" \
# "pivtol" \
# "cz308" \
# "oscil_dcop_31" \
# "oscil_dcop_36" \
# "juba40k" \
# "zeros_nopss_13k" \
# "fs_680_2" \
# "lhr04c" \
# "aug3dcqp" \
# "dataset20mfeatpixel_10NN" \
# "bcsstk10" \
# "nopss_11k" \
# "ex4" \
# "mark3jac040" \
# "bcsstk03" \
# "mimo46x46_system" \
# "ex10hs" \
# "cavity20" \
# "onetone2" \
# "oscil_dcop_22" \
# "saylr1" \
# "cavity10" \
# "gyro_k" \
# "net25" \
# "g7jac080" \
# "cdde1" \
# "piston" \
# "mesh3e1" \
# "oscil_dcop_06" \
# "pores_3" \
# "cavity19" \
# "hydr1" \
# "sparsine" \
# "Goodwin_017" \
# "cond-mat-2005" \
# "rdb450" \
# "young3c" \
# "cavity11" \
# "YaleB_10NN" \
# "darcy003" \
# "gre_216b" \
# "cdde6" \
# "umistfacesnorm_10NN" \
# "g7jac080sc" \
# "bratu3d" \
# "ecology1" \
# "bfwa782" \
# "olm1000" \
# "raefsky6" \
# "Plants_10NN" \
# "onetone1" \
# "oscil_dcop_23" \
# "nemeth25" \
# "circuit204" \
# "amazon0505" \
# "cdde2" \
# "gre_115" \
# "Chebyshev1" \
# "tmt_unsym" \
# "g7jac140sc" \
# "thermomech_TK" \
# "d_dyn" \
# "qh1484" \
# "crack_dual" \
# "lnsp_511" \
# "Hamrle1" \
# "opt1" \
# "mimo8x8_system" \
# "thermomech_TC" \
# "ex36" \
# "vibrobox" \
# "ns3Da" \
# "SiO" \
# "wang3" \
# "rdb450l" \
# "fs_680_1" \
# "mc2depi" \
# "oscil_dcop_54" \
# "CurlCurl_4" \
# "S20PI_n" \
# "cont-300" \
# "msc01440" \
# "fs_680_3" \
# "dielFilterV3clx" \
# "LFAT5000" \
# "ted_B_unscaled" \
# "watt_1" \
# "minsurfo" \
# "mark3jac080" \
# "oscil_dcop_14" \
# "west0156" \
# "cz2548" \
# "cavity14" \
# "orbitRaising_3" \
# "nos1" \
# "vsp_msc10848_300sep_100in_1Kout" \
# "hydr1c" \
# "tuma1" \
# "g7jac140" \
# "ted_B" \
# "g7jac010" \
# "d_dyn1" \
# "dielFilterV3real" \
# "cont-201" \
# "mark3jac060sc" \
# "cit-Patents" \
# "finance256" \
# "Pd" \
# "amazon0312" \
# "d_ss" \
# "odepa400" \
# "optdigits_10NN" \
# "nnc261" \
# "LFAT5" \
# "appu" \
# "S10PI_n" \
# "oscil_trans_01" \
# "b1_ss" \
# "oscil_dcop_04" \
# "rdb1250l" \
# "gyro" \
# "Kuu" \
# "bayer02" \
# "nos7" \
# "thermal1" \
# "mark3jac040sc" \
# "ex8" \
# "cz1268" \
# "qh882" \
# "nos2" \
# "bfwa398" \
# "gre_343" \
# "fd18" \
# "orsirr_1" \
# "amazon0601" \
# "b_dyn" \
# "Kaufhold" \
# "cavity18" \
# "lns_511" \
# "b2_ss" \
# "ASIC_100ks" \
# "qh768" \
# "DK01R" \
# "com-LiveJournal" \
# "G2_circuit" \
# "gre_216a" \
# "g7jac180sc" \
# "dataset16mfeatkarhunen_10NN" \
# "patents" \
# "g7jac180" \
# "soc-Pokec" \
# "662_bus" \
# "nos6" \
# "g7jac010sc" \
# "M20PI_n" \
# "rdb800l" \
# "hollywood-2009" \
# "g7jac100sc" \
# "olm100" \
# "sme3Da" \
# "impcol_c" \
# "lshp1882" \
# "cage3" \
# "nasa1824" \
# "nh2010" \
# "Chebyshev2" \
# "dataset18mfeatmorphological_10NN" \
# "pde900" \
# "uni_chimera_i3" \
# "ncvxqp3" \
# "g7jac100" \
# "dwt_758" \
# "sinc15" \
# "cond-mat-2003" \
# "uni_chimera_i4" \
# "qpband" \
# "oscil_dcop_37" \
# "bcsstm25" \
# "mark3jac100" \
# "dielFilterV2real" \
# "olm500" \
# "coater2" \
# "333SP" \
# "gsm_106857" \
# "sme3Dc" \
# "SiO2" \
# "epb0" \
# "lung1" \
# "twotone" \
# "olm2000" \
# "tub1000" \
# "ACTIVSg2000" \
# "bcsstk12" \
# "poli" \
# "uni_chimera_i5" \
# "rdb2048_noL" \
# "dtoc" \
# "mark3jac140sc" \
# "rdb2048" \
# "gre_512" \
# "oscil_dcop_33" \
# "impcol_a" \
# "cdde3" \
# "rw496" \
# "bcsstm19" \
# "raefsky2" \
# "har_10NN" \
# "tub100" \
# "rw136" \
# "bcsstm06" \
# )



start_time=$(date +%s)

# for name in "ins2" "dc2" "HTC_336_4438"; do
for name in "${MATRICES[@]}"; do
    echo ""
    echo "Go to ${name}"
    data_file="../data/suitesparse/${name}/${name}.mtx"
    # Kernel
    echo ""
    echo "Do hyb ${name}"
    python "${app_hyb}" -d "${data_file}" 2>&1 | tee "${output_dir}/output_tune_${name}_hyb_verbose.log"
    python extract_data.correctness.py -d "${name}"
    echo ""
    echo "Do naive ${name}"
    python "${app_naive}" -d "${data_file}" 2>&1 | tee "${output_dir}/output_tune_${name}_naive_verbose.log"
done

# Concatenate
ready=0
total=0
for name in "${MATRICES[@]}"; do
    ((total++))
    hyb_file="${output_dir}/output_tune_${name}_hyb_collect.csv"
    naive_file="${output_dir}/output_tune_${name}_naive_collect.csv"
    if [ ! -f "${hyb_file}" ]; then
        # Some hyb version performance is not ready yet.
        echo ""
        echo "${name} hyb not ready, yet. Passed"
        continue
    elif [ ! -f "${naive_file}" ]; then
        # Some naive version performance is not ready yet.
        echo ""
        echo "${name} naive not ready, yet. Passed"
        continue
    fi
    ((ready++))
    echo ""
    echo "Collecting ${name} hyb and no-hyb together ..."
    python extract_data.hyb_and_naive.py -d "${name}"
done

is_first=1
total_csv="${output_dir}/output_0_total.csv"
# for name in cora citeseer pubmed ppi; do
for name in "${MATRICES[@]}"; do
    input_csv="${output_dir}/output_tune_${name}_hyb-naive_collect.csv"
    if [ ! -f "${input_csv}" ]; then
        # Some performance is not ready yet.
        continue
    fi
    if [ ${is_first} -eq 1 ]; then
        is_first=0
        head -n 1 "${input_csv}" > "${total_csv}"
    fi
    tail -n 1 "${input_csv}" >> "${total_csv}"
done

echo ""
echo "Saved to ${total_csv} ."
echo "ready/total: ${ready}/${total}"

# Walltime
end_time=$(date +%s)
runtime=$((end_time - start_time))
echo ""
echo "Execution_time(s): ${runtime}"